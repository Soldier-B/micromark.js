(function(a,b){'function'==typeof define&&define.amd?define(b):'object'==typeof exports?module.exports=b():a.Mark=b()})(this,function(){function a(d,e,f){if(d instanceof Node){if('string'==typeof e&&e.length){for(var k,g=d.ownerDocument,h=g.createTreeWalker(d,NodeFilter.SHOW_TEXT,c,!1),i=b(e,f||{}),j=[];h.nextNode();)for(;k=i.exec(h.currentNode.textContent);)j.push({node:h.currentNode,index:k.index,length:i.lastIndex-k.index});for(;k=j.pop();){var l=k.node.splitText(k.index),m=g.createElement('mark');l.splitText(k.length),l.parentNode.insertBefore(m,l),m.appendChild(l)}return Array.apply(0,d.querySelectorAll('mark'))}Array.apply(0,d.querySelectorAll('mark')).forEach(function(n){n.parentNode.replaceChild(n.firstChild,n)}),d.normalize()}}function b(d,e){return d=d.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'),e.separate&&(d='('+d.split(/\s+/g).filter(Boolean).join('|')+')'),e.mode==a.INCLUSIVE_MATCH&&(d='\\w*'+d+'\\w*'),e.mode==a.EXACT_MATCH&&(d='\\b'+d+'\\b'),new RegExp(d,'gi')}var c={acceptNode:function(d){return'MARK'!=d.parentNode.nodeName}};return a.EXCLUSIVE_MATCH=0,a.INCLUSIVE_MATCH=1,a.EXACT_MATCH=2,Object.freeze(a)});